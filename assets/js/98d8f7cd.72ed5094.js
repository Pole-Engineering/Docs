"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2758],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>d});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),l=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},m=function(e){var t=l(e.components);return n.createElement(o.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),h=l(a),c=r,d=h["".concat(o,".").concat(c)]||h[c]||u[c]||i;return a?n.createElement(d,s(s({ref:t},m),{},{components:a})):n.createElement(d,s({ref:t},m))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=c;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[h]="string"==typeof e?e:r,s[1]=p;for(var l=2;l<i;l++)s[l]=a[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},5613:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>o,default:()=>d,frontMatter:()=>p,metadata:()=>l,toc:()=>h});var n=a(7462),r=(a(7294),a(3905));const i=a.p+"assets/images/xyshaper-e84815d64e5c2e7de16eae2e1c2773da.png",s=a.p+"assets/images/shaper-a07c26c5c8eb5d27616674d4d58ccbd2.png",p={sidebar_position:3},o="Input Shaper",l={unversionedId:"Printing Guide/Input Shaping",id:"Printing Guide/Input Shaping",title:"Input Shaper",description:"Input shaping is a technique to reduce or eliminate vibrations (also known as resonance) that occur when the printer moves at high accels. These vibrations can cause visible print defects such as ringing or ghosting, where the surface of the print shows repeating patterns or distortions, especially around corners or sharp changes in direction.",source:"@site/docs/Printing Guide/Input Shaping.md",sourceDirName:"Printing Guide",slug:"/Printing Guide/Input Shaping",permalink:"/Printing Guide/Input Shaping",draft:!1,editUrl:"https://github.com/pole-engineering/Docs/tree/gh-pages/docs/Printing Guide/Input Shaping.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Extrusion Multiplier",permalink:"/Printing Guide/Extrusion Multiplier"},next:{title:"Printing Temperatures",permalink:"/Printing Guide/Printing Temperatures"}},m={},h=[{value:"How it Works?",id:"how-it-works-1",level:2},{value:"Why is it Important?",id:"why-is-it-important-1",level:2},{value:"How to Tune Input Shaper?",id:"how-to-tune-input-shaper-1",level:2},{value:"Settings",id:"settings-1",level:3},{value:"Shaper Models",id:"shaper-models-1",level:2},{value:"Understanding Input Shaper Graphs",id:"understanding-input-shaper-graphs-1",level:2},{value:"1) Power Spectral Density (PSD)",id:"1-power-spectral-density-psd",level:3},{value:"1.1) Magnitude",id:"11-magnitude",level:4},{value:"2) Accelerometer Axes",id:"2-accelerometer-axes",level:3},{value:"3) Shaper Details",id:"3-shaper-details",level:3},{value:"Values in brackets",id:"values-in-brackets",level:4},{value:"Accel Per Hz",id:"accel-per-hz",level:4},{value:"4) Frequency",id:"4-frequency",level:3},{value:"Smooth Input Shaper Algorithms",id:"smooth-input-shaper-algorithms-2",level:2}],u={toc:h},c="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"input-shaper"},"Input Shaper"),(0,r.kt)("p",null,"Input shaping is a technique to reduce or eliminate vibrations (also known as resonance) that occur when the printer moves at high accels. These vibrations can cause visible print defects such as ringing or ghosting, where the surface of the print shows repeating patterns or distortions, especially around corners or sharp changes in direction."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("h3",{parentName:"admonition",id:"should-be-done-before"},"Should be Done Before"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../Printing%20Guide/Extruder%20Calibration"},"Extruder Calibration")," must be done."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../Printing%20Guide/Extrusion%20Multiplier"},"Extrusion Multiplier")," must be done."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../Printing%20Guide/Pressure%20Advance"},"Pressure Advance")," must be done."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../Printing%20Guide/Temperature%20Controls"},"Temperature Controls")," must be done."))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("h3",{parentName:"admonition",id:"required"},"Required"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"ad"},"DangerKlipper (DK)")," required for the folowing section(s):",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"smooth-input-shaper-algorithms"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#smooth-input-shaper-algorithms"},"Smooth Input Shaper Algorithms"))))))),(0,r.kt)("admonition",{title:"skip to;",type:"tip"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"how-it-works"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#how-it-works-1"},"how it works?"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"why-is-it-important"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#why-is-it-important-1"},"Why is it Important?"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"how-to-tune-input-shaper"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#how-to-tune-input-shaper-2"},"How to Tune Input Shaper?")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"settings"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#settings"},"Settings"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"shaper-models"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#shaper-models-1"},"Shaper Models"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"understanding-input-shaper-graphs"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#understanding-input-shaper-graphs"},"Understanding Input Shaper Graphs")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"power-spectral-density-psd"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#1-power-spectral-density-psd"},"Power Spectral Density (PSD)"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"accelerometer-axes"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#2-accelerometer-axes"},"Accelerometer Axes"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"shaper-details"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#3-shaper-details"},"Shaper Details"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"frequency"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#4-frequency"},"Frequency"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"smooth-input-shaper-algorithms-1"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#smooth-input-shaper-algorithms"},"Smooth Input Shaper Algorithms")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"smooth-shapers-avaliable-"},(0,r.kt)("a",{parentName:"h4",href:"/Printing%20Guide/Input%20Shaping#smooth-shapers-avaliable"},"Smooth shapers avaliable"),"-")))))),(0,r.kt)("h2",{id:"how-it-works-1"},"How it Works?"),(0,r.kt)("p",null,"Input shaping works by adjusting the motion commands sent to the printer\u2019s motors, pre-compensating for these vibrations. Essentially, it modifies the acceleration and deceleration profile of the printer\u2019s movements to cancel out the resonance frequencies, allowing higher accelerations without introducing print defects."),(0,r.kt)("h2",{id:"why-is-it-important-1"},"Why is it Important?"),(0,r.kt)("p",null,"Input shaping is important in 3D printing because it directly addresses the problem of vibrations or resonance during high-speed movements, leading to significant improvements in print quality and performance. Here are the key reasons why input shaping is crucial:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Reduces Ringing and Ghosting")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Enables Higher Print Speeds")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Improves Dimensional Accuracy")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Enhances Surface Quality"))),(0,r.kt)("h2",{id:"how-to-tune-input-shaper-1"},"How to Tune Input Shaper?"),(0,r.kt)("p",null,"Unlike other calibrations, input shaping is more specific to Klipper firmware and requires the installation of certain packages. Below, you\u2019ll find a step-by-step guide on how to set up input shaping for your printer and how to interpret the graphs you generate during the process."),(0,r.kt)("h3",{id:"settings-1"},"Settings"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"a-connect-your-adxl345-to-your-printer"},"a) Connect your ADXL345 to your printer."),(0,r.kt)("p",{parentName:"li"},"You can find detailed wiring informations by clicking ",(0,r.kt)("a",{parentName:"p",href:"asd"},"here"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"b-install-the-required-packages"},"b) Install the required packages."),(0,r.kt)("p",{parentName:"li"},"SSH into your printer and run the following commands to install packages"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="SSH"',showLineNumbers:!0,title:'"SSH"'},"sudo apt-get update\nsudo apt update\nsudo apt install python3-numpy python3-matplotlib libatlas-base-dev libopenblas-dev\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"c-install-numpy-in-the-klipper-environment-by-running-the-command"},"c) Install NumPy in the Klipper environment by running the command:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="SSH"',showLineNumbers:!0,title:'"SSH"'},"~/klippy-env/bin/pip install -v numpy\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"d-make-the-required-changes-to-define-adxl345-in-printercfg"},"d) Make the required changes to define ADXL345 in printer.cfg."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="printer.cfg"',showLineNumbers:!0,title:'"printer.cfg"'},"[adxl345]\ncs_pin: adxl:gpio1\nspi_bus: spi0a\naxes_map: x,z,y\n\n[resonance_tester]\naccel_chip: adxl345\nprobe_points:\n    # Somewhere slightly above the middle of your print bed\n    147,154, 20\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("admonition",{parentName:"li",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"You need to include this section if you connected your ADXL345 other than your main controller."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="printer.cfg"',showLineNumbers:!0,title:'"printer.cfg"'},"[mcu adxl]\nserial: /dev/serial/by-id/<mySerial>    \n# Change <mySerial> to whatever you found above. For example, usb-Klipper_rp2040_E661640843545B2E-if00\n")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"e-time-to-run-real-life-tests"},"e) Time to run real life tests!"),(0,r.kt)("p",{parentName:"li"},"  When you type the commands below to console, the specified axis of the printer will start to oscillate. At first, you will be able to see this oscillation, but as the HZ increases, you will only hear the sound. Don\u2019t worry, the sounds are completely normal."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"for-axis-x"},"For Axis X")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="Console"',showLineNumbers:!0,title:'"Console"'},"TEST_RESONANCES AXIS=X\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"for-axis-y"},"For Axis Y")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="Console"',showLineNumbers:!0,title:'"Console"'},"TEST_RESONANCES AXIS=Y\n"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"f-generate-the-graphs"},"f) Generate the Graphs"),(0,r.kt)("p",{parentName:"li"},"  After performing the resonance tests, Klipper generates a ",(0,r.kt)("inlineCode",{parentName:"p"},".csv")," file containing the results of the tests. By running a Python script using the commands below, we can graphically interpret this data by plotting it into a graph."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"for-axis-x-graph"},"For Axis X Graph")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="Console"',showLineNumbers:!0,title:'"Console"'},"~/klipper/scripts/calibrate_shaper.py /tmp/resonances_x_*.csv -o /tmp/shaper_calibrate_x.png\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"for-axis-y-graph"},"For Axis Y Graph")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-properties",metastring:'showLineNumbers title="Console"',showLineNumbers:!0,title:'"Console"'},"~/klipper/scripts/calibrate_shaper.py /tmp/resonances_y_*.csv -o /tmp/shaper_calibrate_y.png\n")),(0,r.kt)("admonition",{parentName:"li",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"You need to delete the older ",(0,r.kt)("inlineCode",{parentName:"p"},".csv")," files before you plotting datas to graphs, otherwise script will use both of the ",(0,r.kt)("inlineCode",{parentName:"p"},".csv")," files to generate the graphs and that'll cause 2 overlapped graphs to each other which makes harder to read and diagnose.")))))),(0,r.kt)("h2",{id:"shaper-models-1"},"Shaper Models"),(0,r.kt)("p",null,"Klipper offers you 5 different shapers. Each one has its own advantage. You can see few details about them below;"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"ZV (Zero Vibration)"),": ZV is a basic form of input shaping designed to reduce vibrations by adjusting motor acceleration.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"MZV (Modified Zero Vibration)"),": MZV builds upon ZV by offering better vibration reduction, particularly for systems with higher resonance frequencies.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"EI (Extra Insensitive)"),": EI input shaping increases the system\u2019s insensitivity to a range of vibration frequencies, allowing for better performance across varied conditions.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"2-Hump EI (Two Hump Extra Insensitive)"),": This variant of EI targets two dominant resonant frequencies simultaneously, providing improved performance for systems with dual frequency vibrations.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"3-Hump EI (Three Hump Extra Insensitive)"),": Like 2-Hump EI, this input shaping method is designed to target three resonance frequencies."))),(0,r.kt)("p",null,"As written before, each one has their own advantages but we mostly recommend using ",(0,r.kt)("inlineCode",{parentName:"p"},"MZV")," for our usecase."),(0,r.kt)("h2",{id:"understanding-input-shaper-graphs-1"},"Understanding Input Shaper Graphs"),(0,r.kt)("p",null,"In order to understand input shaper graphs generated by klipper, you will need to learn about the basics first. Let's take a look to sample graph below"),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("img",{src:s,alt:"shaper",style:{width:1e3,opacity:1}})),(0,r.kt)("h3",{id:"1-power-spectral-density-psd"},"1) Power Spectral Density (PSD)"),(0,r.kt)("p",null,' Power Spectral Density (PSD), the axis magnitude is given in scientific notation, like "1e4," meaning it has a magnitude of ',(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mn",{parentName:"mrow"},"1"),(0,r.kt)("mo",{parentName:"mrow"},"\u2217"),(0,r.kt)("mn",{parentName:"mrow"},"1"),(0,r.kt)("msup",{parentName:"mrow"},(0,r.kt)("mn",{parentName:"msup"},"0"),(0,r.kt)("mn",{parentName:"msup"},"4"))),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"1 * 10^4")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"1"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8141em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"1"),(0,r.kt)("span",{parentName:"span",className:"mord"},(0,r.kt)("span",{parentName:"span",className:"mord"},"0"),(0,r.kt)("span",{parentName:"span",className:"msupsub"},(0,r.kt)("span",{parentName:"span",className:"vlist-t"},(0,r.kt)("span",{parentName:"span",className:"vlist-r"},(0,r.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,r.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,r.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,r.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,r.kt)("span",{parentName:"span",className:"mord mtight"},"4")))))))))))),". Therefore, the peak value in the example has a PSD of:"),(0,r.kt)("div",{className:"math math-display"},(0,r.kt)("span",{parentName:"div",className:"katex-display"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mn",{parentName:"mrow"},"7"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mn",{parentName:"mrow"},"1"),(0,r.kt)("msup",{parentName:"mrow"},(0,r.kt)("mn",{parentName:"msup"},"0"),(0,r.kt)("mn",{parentName:"msup"},"5")),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mn",{parentName:"mrow"},"700"),(0,r.kt)("mo",{parentName:"mrow",separator:"true"},","),(0,r.kt)("mn",{parentName:"mrow"},"000.")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"7(10^5) = 700,000.")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1.1141em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"7"),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord"},"1"),(0,r.kt)("span",{parentName:"span",className:"mord"},(0,r.kt)("span",{parentName:"span",className:"mord"},"0"),(0,r.kt)("span",{parentName:"span",className:"msupsub"},(0,r.kt)("span",{parentName:"span",className:"vlist-t"},(0,r.kt)("span",{parentName:"span",className:"vlist-r"},(0,r.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8641em"}},(0,r.kt)("span",{parentName:"span",style:{top:"-3.113em",marginRight:"0.05em"}},(0,r.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,r.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,r.kt)("span",{parentName:"span",className:"mord mtight"},"5")))))))),(0,r.kt)("span",{parentName:"span",className:"mclose"},")"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"700"),(0,r.kt)("span",{parentName:"span",className:"mpunct"},","),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.1667em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"000.")))))),(0,r.kt)("p",null,'If the PSD value changes to "1e5," it indicates multiplication by 100,000, adding another factor of 10.'),(0,r.kt)("h4",{id:"11-magnitude"},"1.1) Magnitude"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},'"When interpreting my graphs, what value of the PSD should I pay attention to?"'),"\nAssuming you are using a printer with a rigid motion system (e.g: Crossant), if you have a graph with magnitudes of ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mn",{parentName:"mrow"},"3"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mn",{parentName:"mrow"},"1"),(0,r.kt)("msup",{parentName:"mrow"},(0,r.kt)("mn",{parentName:"msup"},"0"),(0,r.kt)("mn",{parentName:"msup"},"5")),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"3(10^5)")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"3"),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord"},"1"),(0,r.kt)("span",{parentName:"span",className:"mord"},(0,r.kt)("span",{parentName:"span",className:"mord"},"0"),(0,r.kt)("span",{parentName:"span",className:"msupsub"},(0,r.kt)("span",{parentName:"span",className:"vlist-t"},(0,r.kt)("span",{parentName:"span",className:"vlist-r"},(0,r.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.8141em"}},(0,r.kt)("span",{parentName:"span",style:{top:"-3.063em",marginRight:"0.05em"}},(0,r.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,r.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,r.kt)("span",{parentName:"span",className:"mord mtight"},"5")))))))),(0,r.kt)("span",{parentName:"span",className:"mclose"},")")))))," and above, you likely have a noise-free and clean graph, meaning you can use that graph."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The greater the magnitude, the cleaner and better your graphs will be.")),(0,r.kt)("h3",{id:"2-accelerometer-axes"},"2) Accelerometer Axes"),(0,r.kt)("p",null,"Axes config is necessary for the accelerometer to understand which axis it is detecting displacement on. You do not need to adjust this according to the movement axes of your printer, as it represents the axes of the accelerometer, not your printer."),(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("img",{src:i,alt:"xyshaper",style:{width:500,opacity:1}})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"X/Y movements:")," x/y movements in our graph must be equal. On this example graph, PSD of x and y is not equal, unequal axes in this graph can indicate false or harmonic resonances/noise.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Z movements:")," we do not expect to see z movements as any movement observed in the Z axis indicates that our toolhead is flexible/wobbly and not sufficiently rigid.")),(0,r.kt)("h3",{id:"3-shaper-details"},"3) Shaper Details"),(0,r.kt)("p",null,"The following list is organized from the least aggressive to the most aggressive in terms of vibration reduction and smoothing effects. The values in parentheses indicate the frequency settings for the ","[input_shaper]"," configuration."),(0,r.kt)("h4",{id:"values-in-brackets"},"Values in brackets"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"vibr-vibration"},"Vibr (vibration)"),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"This represents the total remaining vibration after applying the respective shaper."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"sm-smoothing"},"Sm (smoothing)"),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"This term refers to smoothing, indicating how the shaper influences motion. Each shaper introduces a specific deviation from Klipper's calculated target motion, which is essential for reducing vibration. However, this deviation may also result in smoothing, leading to a loss of finer details. It provides a qualitative means to assess the effects of various shapers."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"accel-acceleration"},"Accel (acceleration)"),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"This denotes the maximum recommended acceleration for each shaper to prevent excessive smoothing. For instance, if a printer can handle an acceleration of 20,000, it should be capable of less acceleration when utilizing the 3HUMP_EI shaper. It's important to note that this figure is not intended to be the new acceleration setting for a printer rated at 3,000.")))),(0,r.kt)("p",null,"Lastly, the recommended shaper aims to achieve an optimal balance between smoothing and residual vibration."),(0,r.kt)("h4",{id:"accel-per-hz"},"Accel Per Hz"),(0,r.kt)("p",null,"This is one of the settings you want to adjust during testing. It's located under the ",(0,r.kt)("strong",{parentName:"p"},"[resonance_tester]")," and the default value is ",(0,r.kt)("strong",{parentName:"p"},"75"),". When you increase this value and start a test, you will notice that your printer shakes much more aggressively. The reason for this is that this setting determines the acceleration value that will be increased per Hz. "),(0,r.kt)("p",null,"The accel_per_hz is generally directly proportional to the PSD. A higher accel_per_hz leads to a stronger PSD. In a rigid motion system, using the default value of 75 Hz will only measure noise because the 75 Hz increment is too weak to shake the rigidity of your motion system. Therefore, when testing with a crossant, it is recommended to start from 150 and test up to 200 (or even 250 in exceptional cases)."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"No matter how clean your graph is, the ZV algorithm is highly aggressive and is largely not recommended for use. You might think that using ZV results in less smoothing, but due to the aggressive nature of ZV, it may not be able to cancel out any unwanted frequencies generated in your printer's motion system. As a result, you may experience defects in your prints. Our recommendation is MZV.")),(0,r.kt)("h3",{id:"4-frequency"},"4) Frequency"),(0,r.kt)("p",null,"As outlined earlier, the assessment involves a wide spectrum of frequency inputs, and the resulting frequency data is represented along the X-axis."),(0,r.kt)("h2",{id:"smooth-input-shaper-algorithms-2"},"Smooth Input Shaper Algorithms"),(0,r.kt)("p",null,"The Smooth Input Shaper algorithms are a collection of input shaping algorithms found in the bleeding-edge branch of Danger Klipper (current version: bleeding-edge-v2). These algorithms utilize smooth polynomial functions to minimize vibrations at specific frequencies, similar to traditional input shapers. Their aim is to provide shapers with enhanced overall performance."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h3",{parentName:"li",id:"smooth-shapers-avaliable"},"Smooth shapers avaliable"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"smooth_zv")," - Smooth version of zv input shaper"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"smooth_mzv")," - Smooth version of mzv input shaper"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"smooth_ei")," - Smooth version of ei input shaper"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"smooth_2hump_ei")," - Smooth version of 2hump_ei input shaper"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"smooth_zvd_ei")," - Zero Vibration Derivative - Extra-Insensitive Smooth Shaper (Documentation and use cases currently limited)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"smooth_si")," - Super Insensitive Smooth Shaper (Documentation and use cases currently limited)")))))}d.isMDXComponent=!0}}]);